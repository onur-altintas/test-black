{% load otree static %}

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

<!-- Latest compiled JavaScript -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


<div class="card bg-light">
    <div class="container" style="text-align:center">
        {% if  simulation_rounds >= round and round >= wo_ai_rounds1%}
            <center><div class="row justify-content-center" style="padding-top: 30px; width:475px">
                <div class="col">
                    <input type="button" class="btn btn-outline-primary" data-toggle="collapse" data-target="#myCollapsible" value="Instructions">
                </div>
                <div class="col">
                    <input type="button" class="btn btn-outline-primary" data-toggle="collapse" data-target="#myCollapsible2" value="Profit Analysis">
                </div>

                <div class="col">
                    <input type="button" class="btn btn-outline-primary" data-toggle="collapse" data-target="#myCollapsible3" value="BakerAI Support">
                </div>
            </div></center>
            {% if treatment == 'partial' or treatment == 'full'%}
                <center><div class="row justify-content-center" style="padding-top: 30px; width:465px">
                    <div class="col">
                        <input type="button" class="btn btn-outline-success" data-toggle="modal" data-target="#myModalAI" value="BakerAI Explanation">
                    </div>
                </div></center>
            {% endif %}
        {% else %}
            <center><div class="row justify-content-center" style="padding-top: 30px; width:360px">
                <div class="col">
                    <input type="button" class="btn btn-outline-primary" data-toggle="collapse" data-target="#myCollapsible" value="Instructions">
                </div>
                <div class="col">
                    <input type="button" class="btn btn-outline-primary" data-toggle="collapse" data-target="#myCollapsible2" value="Profit Analysis">
                </div>
            </div></center>
        {% endif %}



        <div class="row" style="padding-top:20px">
            {% if round == 1 %}
                <div id="myCollapsible" class="collapse in show" style="text-align:left; padding-left: 30px; padding-right: 30px">
            {% else %}
                <div id="myCollapsible" class="collapse" style="text-align:left; padding-left: 30px; padding-right: 30px">
            {% endif %}
                <hr>
                <h5 style="text-align:center; padding-bottom: 0px">Instructions:</h5>
            <p style="padding: 0px">
                In this business simulation, you will be the manager of a small bakery.
                Every evening, as a manager, you order loaves of bread from your supplier to sell them on the next day.
                The demand for the bread is <u><strong>uncertain</strong></u> and it fluctuates <u><strong>independently</strong></u> from day to day.
                Historically, the demand was as low as 0 and as high as 300 loaves of bread a day.
                Any unsold bread will be thrown away at the end of each day.
                <span style="text-decoration: line-through;">When you are sold-out, you do not get any information about how many customers you could not serve. </span>

                Now, your objective is to <strong> maximize your cumulative profit</strong>
                for the <strong>next {{ rounds_left }} days.</strong>
            </p>
            </div>

            {% if round == 1 %}
                <div id="myCollapsible2" class="collapse show" style="text-align:left; padding-left: 30px; padding-right: 30px">
            {% else %}
                <div id="myCollapsible2" class="collapse" style="text-align:left; padding-left: 30px; padding-right: 30px">
            {% endif %}
             <hr>
             <h5 style="text-align:center; padding-bottom: 0px">Profit Analysis:</h5>
             <p style="padding-top: 0px; text-align:left">
                 On any given day, the demand for the bread might be less or more than the amount you ordered: </p>

            <p><b>If you were sold-out:</b> &emsp;<br>
                In this case, you sold everything you ordered. There might be some customers who came to the store,
                saw that you were sold-out and left the bakery.
                <!--If you ordered more breads, you might have sold more.-->
                <div> <u>The formula for the profit for the sold-out case:</u> &ensp; </div>
                <div class="text-center" style="font-size:12pt">(Unit selling price - Unit purchase cost) x (Number of breads sold)</div>
            </p>
                <p><b>If you had some leftovers:</b> &emsp; <br>
                In this case, the demand for the bread was less than the amount you ordered in the last evening.
                You served all of your customers came to the store.
                However, at the end of the day, you had to throw all the unsold breads away.

            <div><u>  The formula for the profit in the leftover case:</u></div>

            <div class="text-center" style="font-size:12pt"> (Unit selling price - Unit purchase cost) x (Number of breads sold)
                - (Unit purchase cost x Number of breads leftover)</div>
            </p>
            </div>

            {% if round == wo_ai_rounds1 %}
                <div id="myCollapsible3" class="collapse show" style="text-align:left; padding-left: 30px; padding-right: 30px">
            {% else %}
                <div id="myCollapsible3" class="collapse" style="text-align:left; padding-left: 30px; padding-right: 30px">
            {% endif %}

                <hr>
                <h5 style="text-align:center; padding-bottom: 0px"> BakerAI support:</h5>
                <p style="padding: 0px">
                    {% if participant.vars.hidden_ai == False %}
                        A software company, called SmartBaker Co., is offering you a free trial
                        of its new software <span style="color: darkred; font-weight: 600"> for the next {{ ai_left }} days. </span>
                        Every evening, BakerAI will recommend you how many breads you should order for the next day.
                        {% if participant.vars.treatment == 'performance' %}
                        The vendor's testing results show that users who followed BakerAI's recommendations <strong>every day</strong>
                        were able to capture approximately <strong>80% </strong> of the theoretical optimal profit. <br>
                        {% endif %}
                        It is up to you whether to follow BakerAI's recommendation or not.
                        You can keep using your best judgement to determine the order quantity for the next day
                        or you can follow BakerAI's recommendation.
                    {% else %}
                        A software company, called SmartBaker Co., is offering you a free trial of
                        its new software.
                        Every evening, BakerAI will analyze the history of sales and
                        order quantity to decide how many loaves to order for the next day.
                        it is up to you whether to follow BakerAI's recommendation or not.
                        <s> You can keep using your best judgement to determine the order quantity for the next day or
                            you can follow BakerAI's recommendation.</s>
                    {% endif %}
                </p>
            </div>
            </div>
            </div>
            </div>




        <div class="modal" id="myModalAI" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" align="left">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">
                    <div class="modal-header" >
                        <h4 class='col-12 modal-title text-center'>
                            Explaining how BakerAI works</h4>
                    </div>
                    <div class="modal-body">
                        {% include Constants.treatment_visible %}
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-primary btn-small" onclick="closeModal()"
                              data-dismiss="modal" value="True">Close</button>
                             </div>
                </div>
            </div>
        </div>